![img](data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBB%0D%0AZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9u%0D%0AOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBT%0D%0AVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzEx%0D%0ALmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkNhcGFfMSIgeG1sbnM9Imh0dHA6Ly93d3cu%0D%0AdzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlu%0D%0AayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSIxNjcyLjQxN3B4IiBoZWlnaHQ9IjgzNi41NjNw%0D%0AeCIgdmlld0JveD0iMCAwIDE2NzIuNDE3IDgzNi41NjMiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcg%0D%0AMCAwIDE2NzIuNDE3IDgzNi41NjMiDQoJIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGxpbmVhckdy%0D%0AYWRpZW50IGlkPSJTVkdJRF8xXyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSIz%0D%0AMjAuODU3OSIgeTE9IjU2Ny4wNDIiIHgyPSI0OTQuNTc5MSIgeTI9IjI2Ni4xNDgiPg0KCTxzdG9w%0D%0AICBvZmZzZXQ9IjAiIHN0eWxlPSJzdG9wLWNvbG9yOiM4MTJDODciLz4NCgk8c3RvcCAgb2Zmc2V0%0D%0APSIxIiBzdHlsZT0ic3RvcC1jb2xvcjojMkE0RDlEIi8+DQo8L2xpbmVhckdyYWRpZW50Pg0KPHBh%0D%0AdGggZmlsbD0idXJsKCNTVkdJRF8xXykiIGQ9Ik01NDAuMTM2LDMxMC40MDdjLTI5LjI3OSwwLTUz%0D%0ALjU1Nyw5LjgyMy03MS4zNzUsMjUuOTQybC0wLjA4NCwwLjAyOWwtMC4wNjUsMC4xMDQNCgljLTEy%0D%0ALjQ2MSwxMS4zMTgtMjEuNzQsMjUuNzIxLTI3LjMyNSw0Mi4wMzJsLTAuMDQ0LDAuMDY3bC0zMS45%0D%0ANDcsODQuNTljMCwwLTEzLjEzOC0zNS4yMDYtMTcuNTE3LTQ2Ljk0DQoJYy0wLjE0NS0wLjM4OS0w%0D%0ALjMwNC0wLjgxNC0wLjQ3MS0xLjI1N2MtMjMuNDExLTc2LjI1Mi01MC4zNDEtMTA2LjAwOC0xMTMu%0D%0AMDE1LTEwNi4wMDhjLTY1Ljg4MywwLTEwNy44ODMsNDQuNDY5LTEwNy44ODMsMTA2LjIzMw0KCWMw%0D%0ALDY1LjA2MSw0MS41OSwxMDguMjk1LDExMS41ODcsMTA4LjI5NWMzMC44ODYsMCw2NS44ODEtMTAu%0D%0ANzA1LDg3LjI5NC0zMi45MzlsLTMyLjExNS0zMS43MDkNCgljLTExLjUyOSwxMS45NDMtMzUuODI1%0D%0ALDE4Ljk0MS01NC4zNTUsMTguOTQxYy0zNS40MDgsMC01Ny4yMzMtMTguMTE3LTYwLjUyOS00My4y%0D%0AMzRsMTMxLjc4MywwLjQ1NQ0KCWMxNi4xNDQsNDEuNTk2LDMzLjA4NCw4Ni4zNTgsMzMuMDg0LDg2%0D%0ALjM1OGg0NC4yNzFsMTkuODQ3LTQ1LjcxN2MxNy4zOTksMjguMDA5LDQ4LjIxNyw0Ni40MDIsODku%0D%0AMjcyLDQ2LjQwMg0KCWM2NS44ODQsMCwxMDUuODIxLTQ3LjM0OSwxMDUuODIxLTEwNS44MTlDNjQ2%0D%0ALjM2OSwzNTguMTc1LDYwNC43NzksMzEwLjQwNyw1NDAuMTM2LDMxMC40MDd6IE0yMjMuMTE1LDM5%0D%0AMi45NjgNCgljNy40MTItMjYuMzUzLDI5LjY0Ni0zOS41MzIsNTYuODI1LTM5LjUzMmMyNi45MDcs%0D%0AMCw0Mi41NzksNi4wOTIsNTUuMTE0LDMzLjM4NWMwLjc5MSwxLjk1LDEuNjIyLDQuMDA1LDIuNDgx%0D%0ALDYuMTQ3SDIyMy4xMTV6DQoJIE01NDAuNTQ4LDQ3NS45MzhjLTM2LjY0NiwwLTU1LjE3OS0yOC44%0D%0AMjItNTUuMTc5LTU5LjcwNWMwLTMwLjQ3MiwxOC45NDMtNjAuMTE5LDU1LjE3OS02MC4xMTkNCglj%0D%0AMzMuNzY0LDAsNTUuMTc5LDI5LjY0Nyw1NS4xNzksNjAuMTE5QzU5NS43MjcsNDQ3LjExNiw1Nzcu%0D%0AMTk1LDQ3NS45MzgsNTQwLjU0OCw0NzUuOTM4eiIvPg0KPHBhdGggZmlsbD0iIzY0NTM5RiIgZD0i%0D%0ATTU0MC4xMzYsMzEwLjQwN2MtMjkuMjc5LDAtNTMuNTU3LDkuODIzLTcxLjM3NSwyNS45NDJsLTAu%0D%0AMDg0LDAuMDI5bC0wLjA2NywwLjEwNA0KCWMtMTIuNDU5LDExLjMxOC0yMS43MzgsMjUuNzIxLTI3%0D%0ALjMyMyw0Mi4wMzJsLTAuMDQ0LDAuMDY3bC0zMS45NDcsODQuNTkzYzAsMC0xMy4xNC0zNS4yMDkt%0D%0AMTcuNTE5LTQ2Ljk0NQ0KCWMtMC4xNDMtMC4zODctMC4zMDItMC44MTMtMC40NjktMS4yNTVjLTIz%0D%0ALjQxMS03Ni4yNTItNTAuMzQxLTEwNi4wMDgtMTEzLjAxNi0xMDYuMDA4Yy0xMS4xNCwwLTIxLjU3%0D%0ANywxLjI5OS0zMS4yNjQsMy43MTENCgljNDcuODc0LDE1LjI5MSw3My4yMTYsMzYuNTMyLDkwLjUw%0D%0AOCw4MC4yOWMyLjc1Miw2Ljk2MSwxMy45NDIsMzQuMTg5LDE2LjU4OSw0Mi4xNzVjMTYuMTMxLDQx%0D%0ALjU1OCwzMy4wMzMsODYuMjI1LDMzLjAzMyw4Ni4yMjUNCgloNDQuMjcxbDE5Ljg0Ny00NS43MTdj%0D%0AMTcuMzk5LDI4LjAwOSw0OC4yMTcsNDYuNDAyLDg5LjI3Miw0Ni40MDJjNjUuODg0LDAsMTA1Ljgy%0D%0AMS00Ny4zNDksMTA1LjgyMS0xMDUuODE5DQoJQzY0Ni4zNjksMzU4LjE3NSw2MDQuNzc5LDMxMC40%0D%0AMDcsNTQwLjEzNiwzMTAuNDA3eiBNNTQwLjU0OCw0NzUuOTM4Yy0zNi42NDYsMC01NS4xNzktMjgu%0D%0AODI0LTU1LjE3OS01OS43MDUNCgljMC0zMC40NzIsMTguOTQzLTYwLjExOSw1NS4xNzktNjAuMTE5%0D%0AYzMzLjc2NCwwLDU1LjE3OSwyOS42NDcsNTUuMTc5LDYwLjExOUM1OTUuNzI3LDQ0Ny4xMTQsNTc3%0D%0ALjE5NSw0NzUuOTM4LDU0MC41NDgsNDc1LjkzOHoiLz4NCjxsaW5lYXJHcmFkaWVudCBpZD0iU1ZH%0D%0ASURfMl8iIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iNDUxLjI3NTQiIHkxPSI0%0D%0ANTMuNzQ0MSIgeDI9IjYwNS43NTI5IiB5Mj0iNDUzLjc0NDEiPg0KCTxzdG9wICBvZmZzZXQ9IjAi%0D%0AIHN0eWxlPSJzdG9wLWNvbG9yOiM4MTJDODciLz4NCgk8c3RvcCAgb2Zmc2V0PSIxIiBzdHlsZT0i%0D%0Ac3RvcC1jb2xvcjojMkE0RDlEIi8+DQo8L2xpbmVhckdyYWRpZW50Pg0KPHBhdGggZmlsbD0idXJs%0D%0AKCNTVkdJRF8yXykiIGQ9Ik00NTEuMjc1LDQ3NS42NWw0MS4xODMtOTAuMjY5YzAsMC00Ljc1Myw4%0D%0ALjc2OS02LjQ2MiwyMS4yOTVjLTAuNzY0LDUuNjA0LTAuOTA0LDExLjk0Ni0wLjA4NywxOC42MDQN%0D%0ACgljMC40LDMuMjY5LDAuOTk4LDYuNjIxLDEuOTM0LDkuOTg0YzAuODY1LDMuMTExLDEuODg4LDYu%0D%0AMjUsMy4zMTksOS4zNTRjNS4xNDYsMTEuMTU4LDExLjgwNiwxNy45OTIsMTguMzQxLDIyLjQNCglj%0D%0ANC41NjEsMy4wNzYsOS4wMTUsNC45OTYsMTMuMDQyLDYuMjhjNS42ODgsMS44MTMsOS41LDIuMDkz%0D%0ALDkuNSwyLjA5M3MxMi4zMTEsMTcuMjgzLDM0LjY0MiwyNS4wOQ0KCWMyMS42NDQsNy41NjMsMzku%0D%0AMDY2LDEuNTI3LDM5LjA2NiwxLjUyN3MtOC45NDksNy40MjItMjQuNjgzLDEzLjIxMWMtOC45MDcs%0D%0AMy4yNzctMjAuMDQzLDUuODEzLTMyLjY2MSw2LjYwNA0KCWMtNy44MzgsMC40OTMtMTYuMjMsMC40%0D%0AMzYtMjUuMDc3LTAuOTE0Yy0xLjQyNS0wLjIxNy0yLjc5Ni0wLjM5Ny00LjE2LTAuNjMxYy0yLjU2%0D%0ANS0wLjQzOC01LjA1Ni0wLjk1OS03LjQ4Mi0xLjU0NQ0KCWMtNy4wNjMtMS43MDYtMTMuNTA5LTQu%0D%0AMDA0LTE5LjE4Ny02LjY0NkM0NjIuODM4LDQ5OC4yODEsNDUxLjI3NSw0NzUuNjUsNDUxLjI3NSw0%0D%0ANzUuNjV6Ii8+DQo8Zz4NCgk8cGF0aCBmaWxsPSIjM0MzQzNCIiBkPSJNNzM3LjUyNyw0NDEuMDYx%0D%0AYzEuNDQ5LDExLjA1NywxMS4wNTksMTkuMDM1LDI2LjY0OCwxOS4wMzVjOC4xNiwwLDE4Ljg1NC0z%0D%0ALjA4NCwyMy45MzItOC4zNDENCgkJbDE0LjE0MSwxMy45NjJjLTkuNDI4LDkuNzg2LTI0LjgzOCwx%0D%0ANC41MDItMzguNDM2LDE0LjUwMmMtMzAuODE4LDAtNDkuMTI5LTE5LjAzNy00OS4xMjktNDcuNjgx%0D%0ADQoJCWMwLTI3LjE5MiwxOC40OTItNDYuNzc1LDQ3LjQ5OC00Ni43NzVjMjkuOTE0LDAsNDguNTg2%0D%0ALDE4LjQ5Niw0NS4xNDMsNTUuMjk4SDczNy41Mjd6IE03ODYuMTEzLDQyMi43NDYNCgkJYy0xLjQ1%0D%0AMS0xMS42LTEwLjUxNi0xNy40LTIzLjIwNS0xNy40Yy0xMS45NjcsMC0yMS43NTgsNS44MDEtMjUu%0D%0AMDIsMTcuNEg3ODYuMTEzeiIvPg0KCTxwYXRoIGZpbGw9IiMzQzNDM0IiIGQ9Ik05MTUuMDAxLDM4%0D%0AOC4zMDNsLTM4LjA3LDg5LjkyMmgtMjMuOTNsLTM4LjI1Mi04OS45MjJoMjQuMTExbDEyLjMyOCwy%0D%0AOS41NTJsMTMuNzc5LDM3LjcwOGwxMy41OTYtMzcuMzQ4DQoJCWwxMi4zMjYtMjkuOTEySDkxNS4w%0D%0AMDF6Ii8+DQoJPHBhdGggZmlsbD0iIzNDM0MzQiIgZD0iTTEwMTQuNTIzLDQzMy4yNjRjMCwyNS43%0D%0ANC0xNy41ODgsNDYuNTktNDYuNTkyLDQ2LjU5Yy0yOS4wMDgsMC00Ni40MTItMjAuODUtNDYuNDEy%0D%0ALTQ2LjU5DQoJCWMwLTI1LjU2MywxNy43NjgtNDYuNTkyLDQ2LjIzLTQ2LjU5MkM5OTYuMjEsMzg2%0D%0ALjY3MiwxMDE0LjUyMyw0MDcuNzAxLDEwMTQuNTIzLDQzMy4yNjR6IE05NDMuNjM4LDQzMy4yNjQN%0D%0ACgkJYzAsMTMuNTk2LDguMTU4LDI2LjI4MywyNC4yOTMsMjYuMjgzYzE2LjEzNywwLDI0LjI5My0x%0D%0AMi42ODgsMjQuMjkzLTI2LjI4M2MwLTEzLjQxNy05LjQyOC0yNi40NjgtMjQuMjkzLTI2LjQ2OA0K%0D%0ACQlDOTUxLjk3Niw0MDYuNzk2LDk0My42MzgsNDE5Ljg0Nyw5NDMuNjM4LDQzMy4yNjR6Ii8+DQoJ%0D%0APHBhdGggZmlsbD0iIzNDM0MzQiIgZD0iTTEwNTEuNjc1LDM1MS4xMzh2MTI2LjcyNmgtMjEuOTM2%0D%0AVjM1MS4xMzhIMTA1MS42NzV6Ii8+DQoJPHBhdGggZmlsbD0iIzNDM0MzQiIgZD0iTTEwOTMuNzMy%0D%0ALDM4OC40ODF2NDYuNzc1YzAsMTMuNTk3LDcuNDM0LDIzLjkzMywyMS41NzQsMjMuOTMzYzEzLjU5%0D%0ANiwwLDIyLjg0Mi0xMS40MjQsMjIuODQyLTI1LjAxOQ0KCQl2LTQ1LjY4OWgyMS45Mzh2ODkuNTZo%0D%0ALTE5Ljc2MmwtMS40NTEtMTIuMTQ2Yy05LjI0OCw5LjA2NC0xNy43NjgsMTMuNDE4LTMwLjI3Mywx%0D%0AMy40MThjLTIxLjM5MywwLTM2Ljk4Ni0xNi4xMzctMzYuOTg2LTQzLjg3Mg0KCQl2LTQ2Ljk1OUgx%0D%0AMDkzLjczMnoiLz4NCgk8cGF0aCBmaWxsPSIjM0MzQzNCIiBkPSJNMTIxMC44MzUsMzYzLjI4NHYy%0D%0ANS4zOGgyNC42NTZ2MTkuMDM3aC0yNC44Mzh2MzguNjE1YzAsOC41Miw0LjcxOSwxMi42ODgsMTEu%0D%0ANjAyLDEyLjY4OA0KCQljMy40NDksMCw3LjQzNi0xLjA4OCwxMC42OTktMi43MTlsNi4xNjQsMTgu%0D%0AODU3Yy02LjM0NiwyLjUzNS0xMS42MDIsMy42MjUtMTguMzA5LDMuODA1Yy0xOS40LDAuNzIyLTMy%0D%0ALjA4OC0xMC4zMzItMzIuMDg4LTMyLjYzMQ0KCQl2LTM4LjYxNWgtMTYuNjg0di0xOS4wMzdoMTYu%0D%0ANjg0di0yMy4wMjJMMTIxMC44MzUsMzYzLjI4NHoiLz4NCgk8cGF0aCBmaWxsPSIjM0MzQzNCIiBk%0D%0APSJNMTI3Ni4wOTUsMzYzLjI4NGMwLDE3LjIyMy0yNi4xMTEsMTcuMjIzLTI2LjExMSwwQzEyNDku%0D%0AOTg0LDM0Ni4wNjEsMTI3Ni4wOTUsMzQ2LjA2MSwxMjc2LjA5NSwzNjMuMjg0eg0KCQkgTTEyNTEu%0D%0AOTgyLDM4OC4xMjJ2ODkuNzQxaDIyLjExN3YtODkuNzQxSDEyNTEuOTgyeiIvPg0KCTxwYXRoIGZp%0D%0AbGw9IiMzQzNDM0IiIGQ9Ik0xMzg0Ljg1Nyw0MzMuMjY0YzAsMjUuNzQtMTcuNTgsNDYuNTktNDYu%0D%0ANTkyLDQ2LjU5Yy0yOS4wMDQsMC00Ni40MDgtMjAuODUtNDYuNDA4LTQ2LjU5DQoJCWMwLTI1LjU2%0D%0AMywxNy43NjYtNDYuNTkyLDQ2LjIyOS00Ni41OTJDMTM2Ni41NTIsMzg2LjY3MiwxMzg0Ljg1Nyw0%0D%0AMDcuNzAxLDEzODQuODU3LDQzMy4yNjR6IE0xMzEzLjk3Niw0MzMuMjY0DQoJCWMwLDEzLjU5Niw4%0D%0ALjE1OCwyNi4yODMsMjQuMjg5LDI2LjI4M2MxNi4xMzcsMCwyNC4zMDMtMTIuNjg4LDI0LjMwMy0y%0D%0ANi4yODNjMC0xMy40MTctOS40MzItMjYuNDY4LTI0LjMwMy0yNi40NjgNCgkJQzEzMjIuMzE2LDQw%0D%0ANi43OTYsMTMxMy45NzYsNDE5Ljg0NywxMzEzLjk3Niw0MzMuMjY0eiIvPg0KCTxwYXRoIGZpbGw9%0D%0AIiMzQzNDM0IiIGQ9Ik0xNDY1Ljg5Miw0NzcuODYzdi00Ni43NzZjMC0xMy41OTgtNy40MzYtMjMu%0D%0AOTMyLTIxLjU3Ni0yMy45MzJjLTEzLjYwMiwwLTIyLjg0NCwxMS40MjItMjIuODQ0LDI1LjAxOA0K%0D%0ACQl2NDUuNjloLTIxLjkzOXYtODkuNTYxaDE5Ljc2NmwxLjQ0NSwxMi4xNDdjOS4wNjgtOC44ODMs%0D%0AMTguMTI5LTEzLjQxOCwyOS4zNzEtMTMuNDE4YzIxLjAzMywwLDM3Ljg5MywxNS43NzQsMzcuODkz%0D%0ALDQzLjg3NXY0Ni45NTYNCgkJSDE0NjUuODkyeiIvPg0KPC9nPg0KPC9zdmc+DQo=)

# Evolution

[![Build Status](https://dev.azure.com/dillon-adams/GitHub/_apis/build/status/Evolution)](https://dev.azure.com/dillon-adams/GitHub/_build/latest?definitionId=4) [![SonarCloud Coverage](https://sonarcloud.io/api/project_badges/measure?project=DillonAd_Evolution&metric=coverage)](https://sonarcloud.io/dashboard?id=DillonAd_Evolution) [![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg?style=flat-square)](http://makeapullrequest.com)

Evolution is a command line tool to move code for database applications.

## Purpose

Ever have to manage the deployment of an application where all of the logic is in the database? It is not a fun task to manage manually and there aren't many automated solutions that are affordable.

Oracle has _finally_ put out a prerelease version of their .NET Core data access library, so the .NET Core version of this is going forward. The plans are to remove the .NET Framework version after I am sure all of the functionality has been captured.

Once the pilot is done, I definitely want to support Microsoft SQL Server, and look into other database platforms that this kind of tool may be useful. Suggestions are always welcome and encouraged.

## Developer Setup

### Required Software

- [Install Docker](https://www.docker.com/)
- [Install .NET Core](https://www.microsoft.com/net/download/)
- Run `runOracle.sh` to setup Oracle Docker image
  - You may need to go to the Docker store to get permissions to pull the image. (Oracle's policy, not mine)
    - [Image](https://store.docker.com/images/oracle-database-enterprise-edition)
    - Developers will need to create a Docker account to log in to the Docker store.

### Building

(From the base directory)

```bash

dotnet build

```

### Testing

#### Unit Tests

To run the unit tests, simply running the test command is sufficient.

```bash

dotnet test --filter "Category=unit"

```

#### Integration Tests

To run the integration tests, you need to have started the Oracle Docker image and created the user for the tests to use.

To start the Docker image and create the necessary assets, the statements in the `/Setup/runOracle.sh` file will need to be run. The Oracle image takes time to set up, so make sure that the image is fully ready before running the tests. (The health check that reports back to the `docker ps` command sometimes lies. It's best to wait for a couple minutes after seeing the container report as _healthy_ before proceeding)

```bash

dotnet test --filter "Category=integration"

```

## Deployment

At the moment, the way to deploy this solution is to build it from the source. Follow the build steps above and let me know if I missed anything.

## Usage

### Step 1

Write the code! (Possibly the most important part)

### Step 2

Create the Evolution file

```bash

evo add <filename> <evolutionName>

```

This will create an evolution (*.evo.sql) file with the contents the targeted file, but the name of the purpose of the evolution. These evolution files will be the scripts that will be run against the database in the next step.

### Step 2.5

This step is technically optional, but it is highly encouraged for everyone to check the Evolution file(s) into source control. This tool is meant for CI\CD, and the whole premise is predicated on building from source control. Use Git, Team Foundate Version Control, Subversion, or Starteam for all I care.  I'm sure there can be use cases outside of CI\CD, but either way (as I'm sure you already know) version control your code base.

### Step 3

Run the Evolution files!

```bash

evo exec <evolutionFile>

```

The ```<evolutionFile>``` parameter is optional. If that parameter is provided, the program will run all Evolution files that have not been executed before the one specificed. Otherwise, all unexecuted Evolution files will be run.
